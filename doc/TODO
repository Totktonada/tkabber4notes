Примерные наброски идей на будущее.

"/notes list"
"/notes add" - появляется окошко с полями ввода
"/notes del #n"
"/notes edit #n" - окошко с полями ввода

Длинные команды:

/notes add
tag1 tag2 tag3
title
text

/notes edit #n
tag tag tag
title
text

Команда "/todo текст текст текст"
Добавляет новую заметку с тегом "todo".
Заголовок - ?

=======================

Можно вообще таб в Juick-style сделать. Пишешь туда — добавляешь заметку. E
#номер — редактирование. D #номер — удалить. #номер *tag — добавить/удалить
тег. # — вывести все заметки.

======================

Быстрая запись в заметку жуйкосущностей, ссылок и прочего. Возможность
прикрепить заметку к JID'у, смотреть из меню соотв. контакта. Сохранять время
последней модицикации. Выделение -> ПКМ -> заметки.

Обработка разнообразных ошибок при чтении из хранилища или записи в него.

[01:54:36]<Totktonada> ancestor: Оно уже есть. Другая реализация. Да, я хотел
прикрутить их к JID'ам, но как бы опционально и с отображением в едином списке.
Теперь надо думать ещё и над тем, делать ли совместимо с теми заметками или
лучше просто добавить возможность импорта оттуда.

======================

При экспорте в файл (файлы?) фиксировать изменения с помощью vcs. Иначе говоря,
интеграция с одной/несколькими vcs. Хорошо продумать идею, use-cases.

======================

Продумать загрузку/выгрузку gui.tcl.

Подумать над тем, куда подцеплять импорт/экспорт в файл. Можно подключать к
экспорту работу с vcs "плагинами" (из разных файлов).  Как вариант
импорта/экспорта: абстракция «хранилищ», где хранилищем является как private
storage, так и файл на диске. Можно оформить хранилище-файл как библиотеку
(аналогично с ./xmpp/xmpp-notes.tcl)

Отдельная от хранилищ фишка: экспорт в определённый файл по тегу (тегам). Можно
в gui.tcl добавить кнопку «экспортнуть текущее», чтобы сдампить содержимое
lbox.

======================

Может объединить update_lbox и update_lbox_at с помощью
proc ляляля {{idx all} {new_note {}}} {...} ?)

======================

xmpp -> libs (или lib). Туда реализацию файлового хранилища добавить.

======================

Баг: $idx при записи отредактированной заметки не совпадает с индексом в
$notes($current_xlib). Лучший вариант исправления - ввести в формат заметки её
индекс.

======================

Пустой заголовок → Тело отображается в его качестве.

[Done] Возможно, стоит отображать теги. Вообще, стоит подумать над фоматом
отображения заметок в списке.

======================

Запрос на подтверждение при удалении заметки, надо ли?

======================

Теги: выпадающий список в панели вверху. {Все, тег1, тег2, тег3, несколько
тегов}. Послений пункт — появляется окошко с галочками.

[23:37:43]<Totktonada> diSabler: Теги, кстати, уже придумал как сделать. Выбор
обычным выпадающим меню, в котором есть два особых пункта: «All» и «Choose». По
второму выскакивает окошко, в котором галочками отмечаешь, сообщения с какими
именно тегами отображать

[23:39:20]<diSabler> Totktonada: ещё текстовое поле надо. при большом
количестве тегов - проще искать, а не выбирать.

[23:42:36]<Totktonada> diSabler: Тогда можно сделать как в gmrun примерно. Т.е.
ввод обычный, но по <Tab> набираемое слово дополняется до ближайшего
подходязего тега. Потом — до следующего.

[23:42:56]<Totktonada> Так даже интересней получается.

[23:43:26]<diSabler> да

[23:44:05]<diSabler> но при этом не хочится терять возможность просмотра тегов

[23:45:44]<Totktonada> diSabler: Потабать — не вариант? А если (опять же, как в
gmrun) по Tab'у будет не только подставляться тег, но и появляться выпадающий
список с подходящими тегами?

[23:46:31]<diSabler> Totktonada: хз. надо продумать варианты.

======================

Экспорт/импорт. Опция для сохранения заметок в файл, а не в private storage.

======================

Сохранять все элементы внутри хранилища, чтобы при сохранени они оставались. Подумать над тем, хранить ли информацию о дате создания/модификации и прочую, не поддерживаемую другими клиентами в том же хранилище (с риском, что её затрёт другой клиент) или в другом.

======================

[23:44:13]<Totktonada> Хм, что-то когда открыта вкладка с заметками Tkabber
чуть подтормаживает. До последнего коммита не замечал. Странно.

UPD: Видимо, из-за чего-то другого, сейчас всё нормально.

======================

Место для полосы прокрутки в окошке редактирования остаётся даже когда полоса
прокрутки не нужна.

======================

Изменения из строки для ввода тегов по Enter'у надо добавлять в промежуточную
переменную, чтобы при экспорте и прочей обработке обрабатывалось именно то, что
в lbox.

======================

Проверить: несколько пробелов между тегами.
